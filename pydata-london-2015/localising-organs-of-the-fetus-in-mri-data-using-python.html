<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://use.fontawesome.com/2231f865fc.js"></script>
    <link rel="shortcut icon" href="https://pyvideo.org/theme/images/favicon.png">
    <meta name="google-site-verification" content="cHuieLjiIIDAHKKXSPPDsnbLEz9QgVNTi23qy_mOzDU" />

    <title>PyVideo.org &middot; Localising Organs of the Fetus in MRI Data Using Python</title>

    <link href="https://pyvideo.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="PyVideo.org Full Atom Feed" />
    <link href="https://pyvideo.org/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="PyVideo.org Full RSS Feed" />
    <link href="https://pyvideo.org/feeds/event_pydata-london-2015.atom.xml" type="application/atom+xml" rel="alternate" title="PyVideo.org Event Atom Feed" />
    <link href="https://pyvideo.org/feeds/event_pydata-london-2015.rss.xml" type="application/rss+xml" rel="alternate" title="PyVideo.org Event RSS Feed" />

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw=="
          crossorigin="anonymous">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/theme/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/theme/css/base.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


  <meta property="og:site_name" content="PyVideo.org" />
  <meta property="og:title" content="Localising Organs of the Fetus in MRI Data Using Python" />
  <meta property="og:type" content="video" />
  <meta property="og:url" content="https://pyvideo.org/pydata-london-2015/localising-organs-of-the-fetus-in-mri-data-using-python.html" />
    <meta property="og:image" content="https://i.ytimg.com/vi/t1pIh_TOVLM/hqdefault.jpg" />
    <meta property="og:image:secure_url" content="https://i.ytimg.com/vi/t1pIh_TOVLM/hqdefault.jpg" />
    <meta property="og:image:type" content="image/jpeg" />


</head>

<body>
<a class="github" href="https://github.com/pyvideo/pyvideo/wiki/How-to-Contribute-Media">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 2;" src="/images/contribute_to_me_right_red_aa0000.png" alt="Contribute Media" />
</a>
  <div class="header notice clearfix">
    A thank you to everyone who makes this possible:
    <a href="/pages/thank-you-contributors.html">Read More</a>
  </div>
  <header id="banner" class="header clearfix">
    <nav class="header__nav"><div class="container">
      <ul class="nav">
        <li role="presentation">
          <a href="https://pyvideo.org/index.html"><i class="fa fa-fw fa-home"></i> <span>Start</span></a>
        </li>

        <li role="presentation" class="active">
          <a href="https://pyvideo.org/events.html"><i class="fa fa-fw fa-list-ul"></i> <span>Events</span></a>
        </li>

        <li role="presentation">
          <a href="https://pyvideo.org/tags.html"><i class="fa fa-fw fa-tags"></i> <span>Tags</span></a>
        </li>

        <li role="presentation">
          <a href="https://pyvideo.org/speakers.html"><i class="fa fa-fw fa-users"></i> <span>Speakers</span></a>
        </li>

          <li role="presentation"
>
            <a href="https://pyvideo.org/pages/about.html"><i class="fa fa-fw fa-info"></i> <span>About</span></a>
          </li>
          <li role="presentation"
style="display: none;">
            <a href="https://pyvideo.org/pages/thank-you-contributors.html"><i class="fa fa-fw fa-info"></i> <span>Thank You</span></a>
          </li>
          <li role="presentation"
style="display: none;">
            <a href="https://pyvideo.org/pages/thanks-will-and-sheila.html"><i class="fa fa-fw fa-info"></i> <span></span></a>
          </li>
      </ul>
    </div></nav>
    <div class="container">
      <h3 class="text-muted header__title">
      <a href="https://pyvideo.org/"><img src="/theme/images/logo.png" alt="" style="height:50px"> <span><i>Py</i>Video</span> <strong></strong></a>
      </h3>
      <div class="header__searchbox">
        <form method="GET" action="/search.html">
          <input name="q" type="search" placeholder="Search...">
        </form>
      </div>
    </div>
  </header>
  <div class="container">

<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://pyvideo.org/pydata-london-2015/localising-organs-of-the-fetus-in-mri-data-using-python.html" rel="bookmark"
         title="Permalink to Localising Organs of the Fetus in MRI Data Using Python">Localising Organs of the Fetus in MRI Data Using Python
      </a>
    </h2>
 
  </header>

  <footer class="post-info">
    <time class="published" datetime="2015-06-21T00:00:00+00:00">
      <i class="fa fa-calendar"></i> Sun 21 June 2015
    </time>
    <address class="vcard author">
      By
        <a class="url fn" href="https://pyvideo.org/speaker/kevin-keraudren.html">Kevin Keraudren</a>
    </address>
  </footer><!-- /.post-info -->

  <div class="entry-content">
<ul class="nav nav-tabs" role="tablist">
    <li class="active" role="presentation"><a href="#youtube" aria-controls="youtube" role="tab" data-toggle="tab">
        <i class="fa fa-fw fa-youtube"></i> YouTube
    </a></li>
</ul>

<div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="youtube">
        <div class="embed-responsive embed-responsive-16by9 videocontainer">
            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/t1pIh_TOVLM" title="Video for " frameborder="0" allowfullscreen></iframe>
        </div>
    </div>
</div>    <h3>Summary</h3><p>What if medical scanners could localise organs in 3D data in the same
way as your camera automatically detects faces? The task is even more
challenging for a fetus, whose orientation is arbitrary! In this
talk, I will present how scikit-learn's Random Forest and the Python
ecosystem can be used to solve this problem, wrapping a medical
imaging C++ library with Cython along the way.</p>
<h3>Description</h3><div class="section" id="imaging-the-developing-fetus">
<h4>Imaging the developing fetus</h4>
<p>The main challenge when imaging the fetus using Magnetic Resonance
Imaging (MRI) is fetal movement. Acquiring MR images requires time,
during which the fetus is unlikely to stay still. To address this
problem, images are acquired as stacks of 2D slices that freeze in-plane
motion and motion that occurred between slices is corrected
retrospectively. Several stacks of 2D slices acquired in orthogonal
directions are used to reconstruct a high resolution volume of the
fetus. The automated detection of the fetal organs can help this problem
by selecting a region of interest around parts of the fetal body that
move as a rigid body. In this talk, I will present the pipeline I
developed to localise the brain, heart, lungs and liver of the fetus in
MR images, which can be used as pre-processing step for motion
correction.</p>
</div>
<div class="section" id="localising-the-brain-of-the-fetus">
<h4>Localising the brain of the fetus</h4>
<p>The brain is first detected in each 2D slice using a Bag-of-Words
approach with SIFT features, before accumulating the detection results
with RANSAC in order to position a 3D bounding box around the brain.
This bounding box is later refined into a segmentation, which is used
for motion correction. The code, an example dataset and the associated
publications can be found online [1].</p>
<p>The OpenCV Python wrapper is used for feature extraction, while an SVM
from scikit-learn takes care of the machine learning aspect of the
Bag-of-Words. Scikit-learn's Random Forests, trained with patches from
the central region of the brain bounding box and patches outside the
bounding box, are used to refine the box detection into a segmentation.
Medical images combine voxel data with scanner coordinates, which are
used to align successive scans to each other. In order to correctly
handle these coordinates throughout the Python code, as well as easily
access medical image processing functionalities, a wrapper for the IRTK
library [2] was developed using Cython. An image object is a subclass of
numpy arrays. In particular, the function <tt class="docutils literal">__getitem__</tt> is overloaded
in order to update the scanner coordinates each time the image is
cropped or sliced.</p>
</div>
<div class="section" id="localising-the-heart-lungs-and-liver-of-the-fetus">
<h4>Localising the heart, lungs and liver of the fetus</h4>
<p>The location of the brain can be used to guide the search for other
organs of the fetus. The heart, lungs and liver are detected using a
two-step Random Forest approach: a first classification step assigns
each voxel to an organ, and during a subsequent regression step, voxels
vote for the position of the organ center. Steerable cube features,
which can be efficiently computed using integral images, are used as
input for the Random Forests. While all fetuses are aligned at training
time, at test time image features are extracted in a coordinate system
estimated as organs are detected: first the brain, which fixes a point,
then the heart, which fixes an axis, and finally the liver and both
lungs.</p>
<p>Scikit-learn's Random Forests are not designed for parsing images. They
can however be used in a research prototype by precomputing features for
batches of voxels. This approach allows the researcher to focus on the
detection pipeline and the feature extraction step. Example localisation
results are presented in an online video [3].</p>
<div class="line-block">
<div class="line">[1] <a class="reference external" href="https://github.com/kevin-keraudren/example-motion-correction">https://github.com/kevin-keraudren/example-motion-correction</a></div>
<div class="line">[2] <a class="reference external" href="https://github.com/BioMedIA/python-irtk">https://github.com/BioMedIA/python-irtk</a></div>
<div class="line">[3] <a class="reference external" href="http://www.doc.ic.ac.uk/~kpk09/MICCAI2015.mp4">http://www.doc.ic.ac.uk/~kpk09/MICCAI2015.mp4</a></div>
</div>
</div>

  </div><!-- /.entry-content -->

<div class="details-content">
  <h3>Details</h3>
  <ul>
      <li>
        Event:
        <a href="https://pyvideo.org/events/pydata-london-2015.html">PyData London 2015</a>
      </li>
        <li>Language: English</li>
        <li>
            Media URL: <a href="https://www.youtube.com/watch?v=t1pIh_TOVLM" rel="external">YouTube</a>        </li>

  </ul>
</div>
    <a href="https://github.com/pyvideo/data/blob/master/pydata-london-2015/videos/kevin-keraudren-localising-organs-of-the-fetus-in-mri-data-using-python.json">
      <i class="fa fa-pencil-square-o"></i> Improve this page
    </a>

</section>

    <footer class="footer">
      <p>
        &copy;
        <a href="https://github.com/pyvideo/pyvideo/blob/master/LICENSE">PyVideo.org</a> |
        <a href="https://github.com/pyvideo/data/blob/master/LICENSE">pyvideo/data</a>
      </p>
    </footer>

      <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>
      <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
      <script src="/theme/js/ie10-viewport-bug-workaround.js"></script>
      <script src="/theme/js/thumb.js"></script>
      <script src="/theme/js/language.js"></script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-72949800-2']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </div>
</body>
</html>