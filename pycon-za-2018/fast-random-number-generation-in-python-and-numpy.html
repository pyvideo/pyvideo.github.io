<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://use.fontawesome.com/2231f865fc.js"></script>
    <link rel="shortcut icon" href="https://pyvideo.org/theme/images/favicon.png">
    <meta name="google-site-verification" content="cHuieLjiIIDAHKKXSPPDsnbLEz9QgVNTi23qy_mOzDU" />

    <title>PyVideo.org &middot; Fast random number generation in Python and NumPy</title>

    <link href="https://pyvideo.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="PyVideo.org Full Atom Feed" />
    <link href="https://pyvideo.org/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="PyVideo.org Full RSS Feed" />
    <link href="https://pyvideo.org/feeds/event_pycon-za-2018.atom.xml" type="application/atom+xml" rel="alternate" title="PyVideo.org Event Atom Feed" />
    <link href="https://pyvideo.org/feeds/event_pycon-za-2018.rss.xml" type="application/rss+xml" rel="alternate" title="PyVideo.org Event RSS Feed" />

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw=="
          crossorigin="anonymous">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/theme/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/theme/css/base.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


  <meta property="og:site_name" content="PyVideo.org" />
  <meta property="og:title" content="Fast random number generation in Python and NumPy" />
  <meta property="og:type" content="video" />
  <meta property="og:url" content="https://pyvideo.org/pycon-za-2018/fast-random-number-generation-in-python-and-numpy.html" />
    <meta property="og:image" content="https://i.ytimg.com/vi/jWXZ07YBsPM/maxresdefault.jpg" />
    <meta property="og:image:secure_url" content="https://i.ytimg.com/vi/jWXZ07YBsPM/maxresdefault.jpg" />
    <meta property="og:image:type" content="image/jpeg" />


</head>

<body>
<a class="github" href="https://github.com/pyvideo/pyvideo/wiki/How-to-Contribute-Media">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 2;" src="/images/contribute_to_me_right_red_aa0000.png" alt="Contribute Media" />
</a>
  <div class="header notice clearfix">
    A thank you to everyone who makes this possible:
    <a href="/pages/thank-you-contributors.html">Read More</a>
  </div>
  <header id="banner" class="header clearfix">
    <nav class="header__nav"><div class="container">
      <ul class="nav">
        <li role="presentation">
          <a href="https://pyvideo.org/index.html"><i class="fa fa-fw fa-home"></i> <span>Start</span></a>
        </li>

        <li role="presentation" class="active">
          <a href="https://pyvideo.org/events.html"><i class="fa fa-fw fa-list-ul"></i> <span>Events</span></a>
        </li>

        <li role="presentation">
          <a href="https://pyvideo.org/tags.html"><i class="fa fa-fw fa-tags"></i> <span>Tags</span></a>
        </li>

        <li role="presentation">
          <a href="https://pyvideo.org/speakers.html"><i class="fa fa-fw fa-users"></i> <span>Speakers</span></a>
        </li>

          <li role="presentation"
>
            <a href="https://pyvideo.org/pages/about.html"><i class="fa fa-fw fa-info"></i> <span>About</span></a>
          </li>
          <li role="presentation"
style="display: none;">
            <a href="https://pyvideo.org/pages/thank-you-contributors.html"><i class="fa fa-fw fa-info"></i> <span>Thank You</span></a>
          </li>
          <li role="presentation"
style="display: none;">
            <a href="https://pyvideo.org/pages/thanks-will-and-sheila.html"><i class="fa fa-fw fa-info"></i> <span></span></a>
          </li>
      </ul>
    </div></nav>
    <div class="container">
      <h3 class="text-muted header__title">
      <a href="https://pyvideo.org/"><img src="/theme/images/logo.png" alt="" style="height:50px"> <span><i>Py</i>Video</span> <strong></strong></a>
      </h3>
      <div class="header__searchbox">
        <form method="GET" action="/search.html">
          <input name="q" type="search" placeholder="Search...">
        </form>
      </div>
    </div>
  </header>
  <div class="container">

<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://pyvideo.org/pycon-za-2018/fast-random-number-generation-in-python-and-numpy.html" rel="bookmark"
         title="Permalink to Fast random number generation in Python and NumPy">Fast random number generation in Python and NumPy
      </a>
    </h2>
 
  </header>

  <footer class="post-info">
    <time class="published" datetime="2018-10-12T00:00:00+00:00">
      <i class="fa fa-calendar"></i> Fri 12 October 2018
    </time>
    <address class="vcard author">
      By
        <a class="url fn" href="https://pyvideo.org/speaker/bernardt-duvenhage.html">Bernardt Duvenhage</a>
    </address>
  </footer><!-- /.post-info -->

  <div class="entry-content">
<ul class="nav nav-tabs" role="tablist">
    <li class="active" role="presentation"><a href="#youtube" aria-controls="youtube" role="tab" data-toggle="tab">
        <i class="fa fa-fw fa-youtube"></i> YouTube
    </a></li>
    <li class="" role="presentation"><a href="#archive.org" aria-controls="archive.org" role="tab" data-toggle="tab">
        <i class="fa fa-fw fa-file-video-o"></i> ARCHIVE.ORG
    </a></li>
</ul>

<div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="youtube">
        <div class="embed-responsive embed-responsive-16by9 videocontainer">
            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/jWXZ07YBsPM" title="Video for " frameborder="0" allowfullscreen></iframe>
        </div>
    </div>
    <div role="tabpanel" class="tab-pane" id="archive.org">
        <a class="reference external image-reference"
           href="https://archive.org/details/pyconza2018-An_introduction_to_concurrent_programming_with_asyncio">
            <img alt=""
                 src="https://i.ytimg.com/vi/jWXZ07YBsPM/maxresdefault.jpg">
        </a>
    </div>
</div>    <h3>Description</h3><p>A fast Random Number Generator (RNG) is key to doing Monte Carlo
simulations, efficiently initialising machine learning models, shuffling
long sequences of numbers and many tasks in scientific computing.
CPython and NumPy use implementations of the Mersenne Twister RNG and
rejection sampling to generate random numbers in an interval. The NumPy
implementation trades more samples for cheaper division by a power of
two. The implementation is very efficient when the random interval is a
power of two, but on average generate many more samples compared to the
GNU C or Java algorithms. The Python RNG uses an algorithm similar to
GNU C.</p>
<p>A recent paper by Daniel Lemire (<a class="reference external" href="https://arxiv.org/abs/1805.10941">https://arxiv.org/abs/1805.10941</a>)
discusses an efficient division light method to generate uniform random
numbers in an interval. This method is apparently used in the Go
language. On 64-bit platforms there are also fast alternative RNGs that
perform comparatively on statistical examinations passing tests like
BigCrush. The splitmix64 (part of the standard Java API) and lehmer64
RNGs, for example, require approximately 1.5 cycles to generate 32
random bits (without using SIMD) while the 32-bit Mersenne Twister
requires approximately 10 cycles per 32 bits.</p>
<p>This talk will discuss the inclusion of Lemire's method in NumPy as an
alternative to the current rejection sampling implementation. My
implementation results in a 2x - 3x improvement in the performance of
generating a sequence of random numbers. Using splitmix64 or lehmer64
RNGs in NumPy instead of the Mersenne Twister results in a further 2x
performance improvement.</p>
<p>The random module in Python does not do the rejection sampling in C like
NumPy does. Much of the time to get a random number is therefore spent
in the Python code. This talk will also discuss a fast random Python
module that implements Lemire's method instead of the current rejection
sampling, provides alternative RNGs and moves more of the code into C.</p>
<p>I'm considering doing pull requests for both the NumPy modification and
the Python fast random module and will present a detailed analysis of
the proposed modifications.</p>

  </div><!-- /.entry-content -->

<div class="details-content">
  <h3>Details</h3>
  <ul>
      <li>
        Event:
        <a href="https://pyvideo.org/events/pycon-za-2018.html">PyCon ZA 2018</a>
      </li>
        <li>Language: English</li>
        <li>
            Media URL: <a href="https://www.youtube.com/watch?v=jWXZ07YBsPM" rel="external">YouTube</a>, <a href="https://archive.org/details/pyconza2018-An_introduction_to_concurrent_programming_with_asyncio" rel="external">ARCHIVE.ORG</a>        </li>
        <li>
          Related URLs:
          <ul class="related-urls">
<li><a href="https://2018.za.pycon.org/schedule/">
Conference schedule                </a></li><li><a href="https://speakerdeck.com/pyconza/fast-random-number-generation-in-python-and-numpy-by-bernardt-duvenhage">
Slides                </a></li>          </ul>
        </li>

  </ul>
</div>
    <a href="https://github.com/pyvideo/data/blob/master/pycon-za-2018/videos/fast-random-number-generation-in-python-and-numpy.json">
      <i class="fa fa-pencil-square-o"></i> Improve this page
    </a>

</section>

    <footer class="footer">
      <p>
        &copy;
        <a href="https://github.com/pyvideo/pyvideo/blob/master/LICENSE">PyVideo.org</a> |
        <a href="https://github.com/pyvideo/data/blob/master/LICENSE">pyvideo/data</a>
      </p>
    </footer>

      <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>
      <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
      <script src="/theme/js/ie10-viewport-bug-workaround.js"></script>
      <script src="/theme/js/thumb.js"></script>
      <script src="/theme/js/language.js"></script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-72949800-2']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </div>
</body>
</html>