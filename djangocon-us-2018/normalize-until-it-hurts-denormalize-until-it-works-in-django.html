<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://use.fontawesome.com/2231f865fc.js"></script>
    <link rel="shortcut icon" href="https://pyvideo.org/theme/images/favicon.png">
    <meta name="google-site-verification" content="cHuieLjiIIDAHKKXSPPDsnbLEz9QgVNTi23qy_mOzDU" />

    <title>PyVideo.org &middot; "Normalize until it hurts; denormalize until it works" in Django</title>

    <link href="https://pyvideo.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="PyVideo.org Full Atom Feed" />
    <link href="https://pyvideo.org/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="PyVideo.org Full RSS Feed" />
    <link href="https://pyvideo.org/feeds/event_djangocon-us-2018.atom.xml" type="application/atom+xml" rel="alternate" title="PyVideo.org Event Atom Feed" />
    <link href="https://pyvideo.org/feeds/event_djangocon-us-2018.rss.xml" type="application/rss+xml" rel="alternate" title="PyVideo.org Event RSS Feed" />

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw=="
          crossorigin="anonymous">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/theme/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/theme/css/base.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


  <meta property="og:site_name" content="PyVideo.org" />
  <meta property="og:title" content=""Normalize until it hurts; denormalize until it works" in Django" />
  <meta property="og:type" content="video" />
  <meta property="og:url" content="https://pyvideo.org/djangocon-us-2018/normalize-until-it-hurts-denormalize-until-it-works-in-django.html" />
    <meta property="og:image" content="https://i.ytimg.com/vi/01Hm2-NAM3w/maxresdefault.jpg" />
    <meta property="og:image:secure_url" content="https://i.ytimg.com/vi/01Hm2-NAM3w/maxresdefault.jpg" />
    <meta property="og:image:type" content="image/jpeg" />


</head>

<body>
<a class="github" href="https://github.com/pyvideo/pyvideo/wiki/How-to-Contribute-Media">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 2;" src="/images/contribute_to_me_right_red_aa0000.png" alt="Contribute Media" />
</a>
  <div class="header notice clearfix">
    A thank you to everyone who makes this possible:
    <a href="/pages/thank-you-contributors.html">Read More</a>
  </div>
  <header id="banner" class="header clearfix">
    <nav class="header__nav"><div class="container">
      <ul class="nav">
        <li role="presentation">
          <a href="https://pyvideo.org/index.html"><i class="fa fa-fw fa-home"></i> <span>Start</span></a>
        </li>

        <li role="presentation" class="active">
          <a href="https://pyvideo.org/events.html"><i class="fa fa-fw fa-list-ul"></i> <span>Events</span></a>
        </li>

        <li role="presentation">
          <a href="https://pyvideo.org/tags.html"><i class="fa fa-fw fa-tags"></i> <span>Tags</span></a>
        </li>

        <li role="presentation">
          <a href="https://pyvideo.org/speakers.html"><i class="fa fa-fw fa-users"></i> <span>Speakers</span></a>
        </li>

          <li role="presentation"
>
            <a href="https://pyvideo.org/pages/about.html"><i class="fa fa-fw fa-info"></i> <span>About</span></a>
          </li>
          <li role="presentation"
style="display: none;">
            <a href="https://pyvideo.org/pages/thank-you-contributors.html"><i class="fa fa-fw fa-info"></i> <span>Thank You</span></a>
          </li>
          <li role="presentation"
style="display: none;">
            <a href="https://pyvideo.org/pages/thanks-will-and-sheila.html"><i class="fa fa-fw fa-info"></i> <span></span></a>
          </li>
      </ul>
    </div></nav>
    <div class="container">
      <h3 class="text-muted header__title">
      <a href="https://pyvideo.org/"><img src="/theme/images/logo.png" alt="" style="height:50px"> <span><i>Py</i>Video</span> <strong></strong></a>
      </h3>
      <div class="header__searchbox">
        <form method="GET" action="/search.html">
          <input name="q" type="search" placeholder="Search...">
        </form>
      </div>
    </div>
  </header>
  <div class="container">

<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://pyvideo.org/djangocon-us-2018/normalize-until-it-hurts-denormalize-until-it-works-in-django.html" rel="bookmark"
         title="Permalink to "Normalize until it hurts; denormalize until it works" in Django">"Normalize until it hurts; denormalize until it works" in Django
      </a>
    </h2>
 
  </header>

  <footer class="post-info">
    <time class="published" datetime="2018-10-16T00:00:00+00:00">
      <i class="fa fa-calendar"></i> Tue 16 October 2018
    </time>
    <address class="vcard author">
      By
        <a class="url fn" href="https://pyvideo.org/speaker/flavio-juvenal.html">Flávio Juvenal</a>
    </address>
  </footer><!-- /.post-info -->

  <div class="entry-content">
<ul class="nav nav-tabs" role="tablist">
    <li class="active" role="presentation"><a href="#youtube" aria-controls="youtube" role="tab" data-toggle="tab">
        <i class="fa fa-fw fa-youtube"></i> YouTube
    </a></li>
</ul>

<div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="youtube">
        <div class="embed-responsive embed-responsive-16by9 videocontainer">
            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/01Hm2-NAM3w" title="Video for " frameborder="0" allowfullscreen></iframe>
        </div>
    </div>
</div>    <h3>Description</h3><p>There’s a good practice that says “a database is a representer of
facts”. If there’s more than one way to extract a single fact from the
database, then there’s a redundancy in it. Every redundancy can cause
different anomalies in the data, which in turn cause bugs in the
application. To avoid that, there’s a process called normalization,
which involves following sets of rules to restructure the database to
remove redundancies without losing the original facts. The traditional
set of normalization rules are the so-called Normal Forms: First Normal
Form, Second, Third, etc. Unfortunately, those are frequently overlooked
by developers due to their excessive formalism. But in fact, even the
Normal Forms aren’t enough to avoid anomalies, since they’re concerned
about redundancies only in a single table*. Since cross-table
dependencies are very common in modern applications, we must go beyond
normal forms to prevent problems.</p>
<p>In this talk, we’ll present normalization rules on a friendly language,
going beyond normal forms. We’ll understand how the software
requirements cause dependencies in database tables, both in-table and
cross-tables. We’ll show real examples of non-trivial dependencies that
happen on Django models. We’ll discuss how normalization prevents
redundancies, inconsistencies, anomalies, and bugs. Knowing that
normalization can cause slowdowns in queries, we’ll present how to
increase performance with denormalization, which is not the same of not
normalizing. Instead, denormalization means being able to represent data
in multiple ways to speed up queries without introducing
inconsistencies. We’ll discuss Django-related denormalization tools that
use cronjobs, indexes, caching, materialized views and triggers, and
NoSQL.</p>
<ul class="simple">
<li><em>It’s common to ignore the fact that normal forms only discuss
redundancies inside a single table/record/relval. More about this
in`this article &lt;http://www.bkent.net/Doc/simple5.htm#label6&gt;`__
reviewed by Codd, Fagin and Date, key figures of the relational
model.</em></li>
</ul>
<p>Here’s the planned outline:</p>
<ul class="simple">
<li>[1 minute ] Who am I.</li>
<li>[6 minutes] Explaining normalization without normal forms formalism:<ul>
<li>Defining Normalization.</li>
<li>Normalization with only two concepts: Candidate Keys and
Dependencies.</li>
<li>Normalization Rule: every field must provide a fact about the
whole candidate key and nothing but the key.</li>
<li>Violating the Rule: denormalized example, along with anomalies it
has.</li>
<li>Prevent anomalies with a solution based on the Rule.</li>
<li>Setting a Candidate Key in Django: unique_together. Concurrency
issues without unique_together.</li>
</ul>
</li>
<li>[4 minutes] How that’s relevant for Django? Doesn’t modeling with the
ORM kind of solves that?<ul>
<li>Tricky case of field migration.</li>
<li>Tricky case of historical field.</li>
</ul>
</li>
<li>[4 minutes] What about cross-table dependencies?<ul>
<li>A good practice: “Database is Representer of Facts”. If there’s
more than one way to extract a single fact from the database,
there’s a redundancy. If it’s possible to compute a field value by
looking only for other table fields, there’s a redundancy.</li>
<li>Solution: compute at DB-level and query-time using query
expressions, conditional expressions and database functions.</li>
</ul>
</li>
<li>[1 minutes] What about performance?<ul>
<li>Certain facts are naturally expensive to compute.</li>
<li>But design can’t be thought a priori to solve them. Performance is
easier to solve than imprecision.</li>
<li>Therefore: “Normalize until it hurts; denormalize until it works”.
To denormalize you have first to normalize.</li>
</ul>
</li>
<li>[3 minutes] How to denormalize?<ul>
<li>Separate concerns: OLTP vs. OLAP. Transactional data vs.
Analytical data.</li>
<li>Easy way: aggregation queries + extra denormalized models +
cronjob.</li>
</ul>
</li>
<li>[6 minutes] Other less trivial ways to denormalize:<ul>
<li>Indexes</li>
<li>Caching</li>
<li>Materialized Views</li>
<li>Triggers</li>
<li>SQL + NoSQL</li>
</ul>
</li>
</ul>

  </div><!-- /.entry-content -->

<div class="details-content">
  <h3>Details</h3>
  <ul>
      <li>
        Event:
        <a href="https://pyvideo.org/events/djangocon-us-2018.html">DjangoCon US 2018</a>
      </li>
        <li>Language: English</li>
        <li>
            Media URL: <a href="https://www.youtube.com/watch?v=01Hm2-NAM3w" rel="external">YouTube</a>        </li>
        <li>
          Related URLs:
          <ul class="related-urls">
<li><a href="https://2018.djangocon.us/schedule/">
Conference schedule                </a></li><li><a href="http://bit.ly/django-norm">
slides                </a></li>          </ul>
        </li>

  </ul>
</div>
    <a href="https://github.com/pyvideo/data/blob/master/djangocon-us-2018/videos/djangocon-us-2018-normalize-until-it-hurts-denormalize-until-it-works-by-flavio-juvenal.json">
      <i class="fa fa-pencil-square-o"></i> Improve this page
    </a>

</section>

    <footer class="footer">
      <p>
        &copy;
        <a href="https://github.com/pyvideo/pyvideo/blob/master/LICENSE">PyVideo.org</a> |
        <a href="https://github.com/pyvideo/data/blob/master/LICENSE">pyvideo/data</a>
      </p>
    </footer>

      <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>
      <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
      <script src="/theme/js/ie10-viewport-bug-workaround.js"></script>
      <script src="/theme/js/thumb.js"></script>
      <script src="/theme/js/language.js"></script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-72949800-2']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </div>
</body>
</html>